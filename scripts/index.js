var b=document.querySelector("#letter").content.querySelector(".element"),k=({letter:a,id:u})=>{let r=b.cloneNode(!0);return r.querySelector(".element__letter").textContent=a,r.querySelector(".element__letter").dataset.id=u,r.setAttribute("tabindex","0"),r},_=(a,u)=>{let r=document.createDocumentFragment();a.forEach(i=>{let m=k(i);r.append(m)}),u.append(r)};var L=[{letter:"A",id:"a"},{letter:"B",id:"b"},{letter:"C",id:"c"},{letter:"D",id:"d"},{letter:"E",id:"e"},{letter:"F",id:"f"},{letter:"G",id:"g"},{letter:"H",id:"h"},{letter:"I",id:"i"},{letter:"J",id:"j"},{letter:"K",id:"k"},{letter:"L",id:"l"},{letter:"M",id:"m"}],E=[{letter:"N",id:"n"},{letter:"O",id:"o"},{letter:"P",id:"p"},{letter:"Q",id:"q"},{letter:"R",id:"r"},{letter:"S",id:"s"},{letter:"T",id:"t"},{letter:"U",id:"U"},{letter:"V",id:"v"},{letter:"W",id:"w"},{letter:"X",id:"x"},{letter:"Y",id:"y"},{letter:"Z",id:"z"}];document.addEventListener("DOMContentLoaded",()=>{let a=document.querySelector(".column__left"),u=document.querySelector(".column__right");_(L,a),_(E,u);let r=document.getElementById("name"),i=document.getElementById("position"),m=document.getElementById("phone"),f=document.querySelector(".buttons__button--add"),d=new Map;function y(e,t,n){return d.has(`${e.toLowerCase()}|${t.toLowerCase()}|${n}`)}let h=(e,t,n)=>{let c=document.querySelector("#message").content.querySelector(".message").cloneNode(!0);return c.querySelector(".message__name").textContent=e,c.querySelector(".message__position").textContent=t,c.querySelector(".message__phone").textContent=n,c},x=(e,t,n,o)=>{let c=h(e,t,n);o.querySelector(".element__contacts").append(c),g(o),d.set(`${e.toLowerCase()}|${t.toLowerCase()}|${n}`,{name:e,position:t,phone:n})};f.addEventListener("click",e=>{e.preventDefault();let t=r.value.trim(),n=i.value.trim(),o=m.value.trim();if(!t||!n||!o){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F");return}if(y(t,n,o)){alert("\u042D\u0442\u043E\u0442 \u043A\u043E\u043D\u0442\u0430\u043A\u0442 \u0443\u0436\u0435 \u0437\u0430\u043F\u0438\u0441\u0430\u043D!");return}let c=t[0].toUpperCase(),v=document.querySelector(`[data-id="${c.toLowerCase()}"]`)?.closest(".column__element");x(t,n,o,v),r.value="",i.value="",m.value=""}),document.querySelectorAll(".element__container").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=t.target.closest(".element").querySelector(".element__contacts");o.classList.toggle("element__contacts--open"),o.classList.contains("element__contacts--open")?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0})});function g(e){let t=e.querySelector(".element__counter"),o=e.querySelector(".element__contacts").children.length;o>0?(t.classList.add("element__counter--active"),t.textContent=o):(t.classList.remove("element__counter--active"),t.textContent=0)}let A=e=>{let t=e.target.closest(".message__delete");if(!t)return;let n=t.closest(".element__message"),o=t.closest(".column__element");n&&o&&(n.remove(),g(o))};document.addEventListener("click",A);let B=document.querySelector(".buttons__button--clear"),P=()=>{document.querySelectorAll(".column__element").forEach(e=>{let t=e.querySelector(".element__contacts");t.innerHTML="";let n=e.querySelector(".element__counter");n.classList.remove("element__counter--active"),n.textContent="0"})},l=document.querySelector("#edit-popup"),S=l.querySelector(".popup__input--name"),q=l.querySelector(".popup__input--position"),C=l.querySelector(".popup__input--phone"),w=l.querySelector(".popup__button-save"),I=l.querySelector(".popup__button-cancel"),T=document.querySelector(".popup__overlay"),s=null;function $(e){s=e,S.value=e.querySelector(".message__name").textContent,q.value=e.querySelector(".message__position").textContent,C.value=e.querySelector(".message__phone").textContent,l.classList.add("popup--open")}function p(){l.classList.remove("popup--open"),s=null}w.addEventListener("click",()=>{let e=S.value.trim(),t=q.value.trim(),n=C.value.trim();if(!e||!t||!n){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F");return}let o=s.querySelector(".message__name").textContent,c=s.querySelector(".message__phone").textContent;if((e!==o||n!==c)&&y(e,t,n)){alert("\u042D\u0442\u043E\u0442 \u043A\u043E\u043D\u0442\u0430\u043A\u0442 \u0443\u0436\u0435 \u0437\u0430\u043F\u0438\u0441\u0430\u043D!");return}d.delete(`${o.toLowerCase()}|${c}`),d.set({name:e,position:t,phone:n}),s.querySelector(".message__name").textContent=e,s.querySelector(".message__position").textContent=t,s.querySelector(".message__phone").textContent=n,p()}),T.addEventListener("click",p),I.addEventListener("click",p),document.addEventListener("click",e=>{if(e.target.classList.contains("message__edit")){let t=e.target.closest(".message");$(t)}}),B.addEventListener("click",P)});
