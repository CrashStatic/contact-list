var L=document.querySelector("#letter").content.querySelector(".element"),f=({letter:r,id:l})=>{let c=L.cloneNode(!0);return c.querySelector(".element__letter").textContent=r,c.querySelector(".element__letter").dataset.id=l,c.setAttribute("tabindex","0"),c},u=(r,l)=>{let c=document.createDocumentFragment();r.forEach(a=>{let i=f(a);c.append(i)}),l.append(c)};var m=[{letter:"A",id:"a"},{letter:"B",id:"b"},{letter:"C",id:"c"},{letter:"D",id:"d"},{letter:"E",id:"e"},{letter:"F",id:"f"},{letter:"G",id:"g"},{letter:"H",id:"h"},{letter:"I",id:"i"},{letter:"J",id:"j"},{letter:"K",id:"k"},{letter:"L",id:"l"},{letter:"M",id:"m"}],_=[{letter:"N",id:"n"},{letter:"O",id:"o"},{letter:"P",id:"p"},{letter:"Q",id:"q"},{letter:"R",id:"r"},{letter:"S",id:"s"},{letter:"T",id:"t"},{letter:"U",id:"U"},{letter:"V",id:"v"},{letter:"W",id:"w"},{letter:"X",id:"x"},{letter:"Y",id:"y"},{letter:"Z",id:"z"}];document.addEventListener("DOMContentLoaded",()=>{let r=document.querySelector(".column__left"),l=document.querySelector(".column__right");u(m,r),u(_,l);let c=document.getElementById("name"),a=document.getElementById("position"),i=document.getElementById("phone"),p=document.querySelector(".buttons__button--add"),g=document.querySelector("#message").content.querySelector(".message"),y=(n,e,o)=>{let t=g.cloneNode(!0);return t.querySelector(".message__name").textContent=n,t.querySelector(".message__position").textContent=e,t.querySelector(".message__phone").textContent=o,t},C=(n,e)=>{let t=[...(m.some(s=>s.letter===e)?r:l).children].find(s=>s.querySelector(".element__letter").dataset.id===e.toLowerCase());t?(t.querySelector(".element__contacts").append(n),d(t)):alert(`\u0411\u0443\u043A\u0432\u0430 "${e}" \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u0432 \u0442\u0430\u0431\u043B\u0438\u0446\u0435.`)};p.addEventListener("click",n=>{n.preventDefault();let e=c.value.trim(),o=a.value.trim(),t=i.value.trim();if(!e||!o||!t){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F");return}let s=e[0].toUpperCase(),v=y(e,o,t);C(v,s),c.value="",a.value="",i.value=""}),document.querySelectorAll(".element__container").forEach(n=>{n.addEventListener("click",e=>{e.preventDefault();let t=e.target.closest(".element").querySelector(".element__contacts");t.classList.toggle("element__contacts--open"),t.classList.contains("element__contacts--open")?t.style.maxHeight=`${t.scrollHeight}px`:t.style.maxHeight=0})});function d(n){let e=n.querySelector(".element__counter"),t=n.querySelector(".element__contacts").children.length;t>0?(e.classList.add("element__counter--active"),e.textContent=t):(e.classList.remove("element__counter--active"),e.textContent=0)}let E=n=>{let e=n.target.closest(".message__delete");if(!e)return;let o=e.closest(".element__message"),t=e.closest(".column__element");o&&t&&(o.remove(),d(t))};document.addEventListener("click",E);let q=document.querySelector(".buttons__button--clear"),S=()=>{document.querySelectorAll(".column__element").forEach(n=>{let e=n.querySelector(".element__contacts");e.innerHTML="";let o=n.querySelector(".element__counter");o.classList.remove("element__counter--active"),o.textContent="0"})};q.addEventListener("click",S)});
