var v=document.querySelector("#letter").content.querySelector(".element"),h=({letter:l,id:s})=>{let r=v.cloneNode(!0);return r.querySelector(".element__letter").textContent=l,r.querySelector(".element__letter").dataset.id=s,r.setAttribute("tabindex","0"),r},u=(l,s)=>{let r=document.createDocumentFragment();l.forEach(a=>{let i=h(a);r.append(i)}),s.append(r)};var p=[{letter:"A",id:"a"},{letter:"B",id:"b"},{letter:"C",id:"c"},{letter:"D",id:"d"},{letter:"E",id:"e"},{letter:"F",id:"f"},{letter:"G",id:"g"},{letter:"H",id:"h"},{letter:"I",id:"i"},{letter:"J",id:"j"},{letter:"K",id:"k"},{letter:"L",id:"l"},{letter:"M",id:"m"}],y=[{letter:"N",id:"n"},{letter:"O",id:"o"},{letter:"P",id:"p"},{letter:"Q",id:"q"},{letter:"R",id:"r"},{letter:"S",id:"s"},{letter:"T",id:"t"},{letter:"U",id:"U"},{letter:"V",id:"v"},{letter:"W",id:"w"},{letter:"X",id:"x"},{letter:"Y",id:"y"},{letter:"Z",id:"z"}];document.addEventListener("DOMContentLoaded",()=>{let l=document.querySelector(".column__left"),s=document.querySelector(".column__right");u(p,l),u(y,s);let r=document.getElementById("name"),a=document.getElementById("position"),i=document.getElementById("phone"),g=document.querySelector(".buttons__button--add"),m=new Set;function E(o,e,n){let t=!0;for(let c of m.keys())c.name===o&&c.position===e&&c.phone===n&&(t=!1);return t}let S=(o,e,n)=>{let c=document.querySelector("#message").content.querySelector(".message").cloneNode(!0);return c.querySelector(".message__name").textContent=o,c.querySelector(".message__position").textContent=e,c.querySelector(".message__phone").textContent=n,c},f=(o,e,n,t)=>{let c=S(o,e,n);t.querySelector(".element__contacts").append(c),d(t)};g.addEventListener("click",o=>{o.preventDefault();let e=r.value.trim(),n=a.value.trim(),t=i.value.trim();if(!e||!n||!t){alert("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F");return}if(E(e,n,t))m.add({name:e,position:n,phone:t});else{alert("\u042D\u0442\u043E\u0442 \u043A\u043E\u043D\u0442\u0430\u043A\u0442 \u0443\u0436\u0435 \u0437\u0430\u043F\u0438\u0441\u0430\u043D!");return}let c=e[0].toUpperCase(),_=document.querySelector(`[data-id="${c.toLowerCase()}"]`)?.closest(".column__element");f(e,n,t,_),r.value="",a.value="",i.value=""}),document.querySelectorAll(".element__container").forEach(o=>{o.addEventListener("click",e=>{e.preventDefault();let t=e.target.closest(".element").querySelector(".element__contacts");t.classList.toggle("element__contacts--open"),t.classList.contains("element__contacts--open")?t.style.maxHeight=`${t.scrollHeight}px`:t.style.maxHeight=0})});function d(o){let e=o.querySelector(".element__counter"),t=o.querySelector(".element__contacts").children.length;t>0?(e.classList.add("element__counter--active"),e.textContent=t):(e.classList.remove("element__counter--active"),e.textContent=0)}let C=o=>{let e=o.target.closest(".message__delete");if(!e)return;let n=e.closest(".element__message"),t=e.closest(".column__element");n&&t&&(n.remove(),d(t))};document.addEventListener("click",C);let q=document.querySelector(".buttons__button--clear"),L=()=>{document.querySelectorAll(".column__element").forEach(o=>{let e=o.querySelector(".element__contacts");e.innerHTML="";let n=o.querySelector(".element__counter");n.classList.remove("element__counter--active"),n.textContent="0"})};q.addEventListener("click",L)});
